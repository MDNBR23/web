<!doctype html><html lang="es" data-theme="light"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Administraci√≥n ‚Äî NBR WEB</title>
<link rel="stylesheet" href="style.css">
<script>
  document.documentElement.classList.add('preload');
  window.addEventListener('DOMContentLoaded', function(){
    document.body.classList.add('loaded');
    document.documentElement.classList.remove('preload');
  });
</script>
</head><body>
  <div class="layout">
    <aside class="sidebar">
      <div class="logo">NBR WEB</div>
      <nav>
        <a href="main.html">üè† <span>Principal</span></a>
        <a href="calculadora.html">üíä <span>Banco de medicamentos</span></a>
        <a href="configuracion.html">‚öôÔ∏è <span>Configuraci√≥n</span></a>
        <a href="admin.html" class="active">üõ†Ô∏è <span>Administraci√≥n</span></a>
      </nav>
    </aside>
    <div class="content">
      <header class="header">
        <button id="btnToggleSidebar" type="button"></button>
        <h2>Administraci√≥n</h2>
        <div class="user-info">
          <img id="avatarTop" alt="">
          <span id="mainUserInfo" class="text-muted"></span>
          <button class="btn danger sm" type="button" onclick="logout()">Salir</button>
        </div>
      </header>
      <main>
        <section class="card glass">
          <div class="toolbar" style="display:flex;align-items:center;gap:10px;margin-bottom:10px">
            <h3 style="margin:0;">Usuarios</h3><div class="grow"></div>
          </div>
          <div class="table-wrap">
            <table id="adminUsersTable">
              <thead><tr>
                <th>Usuario</th><th>Nombre</th><th>Categor√≠a</th><th>Correo</th><th>Tel√©fono</th><th>Instituci√≥n</th><th>Rol</th><th>Estado</th><th style="width:320px">Acciones</th>
              </tr></thead><tbody></tbody>
            </table>
          </div>
        </section>

        <div class="grid-2col" style="grid-template-columns:1fr 1fr;">
          <section class="card glass">
            <div class="toolbar" style="display:flex;align-items:center;gap:10px;margin-bottom:10px">
              <h3 style="margin:0;">Anuncios</h3><div class="grow"></div>
              <button id="btnNuevoAnuncio" class="btn sm" type="button">+ Nuevo anuncio</button>
            </div>
            <div class="table-wrap">
              <table id="adminAnunciosTable"><thead>
                <tr><th>Imagen</th><th>T√≠tulo</th><th>Fecha</th><th>Contenido</th><th style="width:160px;">Acciones</th></tr>
              </thead><tbody></tbody></table>
            </div>
          </section>

          <section class="card glass">
            <div class="toolbar" style="display:flex;align-items:center;gap:10px;margin-bottom:10px">
              <h3 style="margin:0;">Gu√≠as</h3><div class="grow"></div>
              <button id="btnNuevaGuia" class="btn sm" type="button">+ Nueva gu√≠a</button>
            </div>
            <div class="table-wrap">
              <table id="adminGuiasTable"><thead>
                <tr><th>T√≠tulo</th><th>Fecha</th><th>Contenido</th><th>Enlace</th><th style="width:160px;">Acciones</th></tr>
              </thead><tbody></tbody></table>
            </div>
          </section>
        </div>

        <section class="card glass">
          <div class="toolbar" style="display:flex;align-items:center;gap:10px;margin-bottom:10px">
            <h3 style="margin:0;">Banco de Medicamentos</h3><div class="grow"></div>
            <button id="btnNuevoMedicamento" class="btn sm" type="button">+ Nuevo medicamento</button>
          </div>
          <div class="table-wrap">
            <table id="adminMedicamentosTable"><thead>
              <tr><th>F√°rmaco</th><th>Grupo</th><th>Diluci√≥n</th><th>Comentarios</th><th style="width:160px;">Acciones</th></tr>
            </thead><tbody></tbody></table>
          </div>
        </section>
      </main>
    </div>
  </div>

  <!-- MODAL USUARIO -->
  <div class="modal-backdrop" id="modalUser">
    <div class="modal glass">
      <header><h3 style="margin:0;">Editar usuario</h3><button class="btn secondary sm" type="button" data-close-user>‚úï</button></header>
      <form id="userForm">
        <div class="grid">
          <div class="field"><label>Usuario</label><input id="u_username" type="text" disabled></div>
          <div class="field"><label>Nombre</label><input id="u_name" type="text"></div>
          <div class="field"><label>Categor√≠a</label>
            <select id="u_cat"><option>Estudiante</option><option>Interno</option><option>M√©dico General</option><option>Residente</option><option>Pediatra</option></select>
          </div>
          <div class="field"><label>Correo</label><input id="u_email" type="email"></div>
          <div class="field"><label>Tel√©fono</label><input id="u_phone" type="text"></div>
          <div class="field"><label>Instituci√≥n</label><input id="u_inst" type="text"></div>
          <div class="field"><label>Rol</label><select id="u_role"><option>user</option><option>admin</option></select></div>
          <div class="field"><label>Estado</label><select id="u_status"><option value="pendiente">pendiente</option><option value="aprobado">aprobado</option><option value="rechazado">rechazado</option><option value="suspendido">suspendido</option></select></div>
        </div>
        <div class="auth-actions" style="margin-top:14px;"><button class="btn grow" type="submit">Guardar</button><button class="btn secondary" type="button" data-close-user>Cancelar</button></div>
      </form>
    </div>
  </div>

  <!-- MODAL ANUNCIO -->
  <div class="modal-backdrop" id="modalAnuncio">
    <div class="modal glass">
      <header><h3 style="margin:0;">Editar anuncio</h3><button class="btn secondary sm" type="button" data-close-anuncio>‚úï</button></header>
      <form id="anuncioForm"><input type="hidden" id="anuncioId">
        <div class="grid">
          <div>
            <div class="field"><label for="anuncioTitulo">T√≠tulo</label><input id="anuncioTitulo" type="text"></div>
            <div class="field"><label for="anuncioFecha">Fecha</label><input id="anuncioFecha" type="date"></div>
            <div class="field"><label for="anuncioTexto">Contenido</label><textarea id="anuncioTexto"></textarea></div>
            <div class="field"><label class="switch"><input id="anuncioGlobal" type="checkbox" checked><span class="slider"></span><span>Visible para todos los usuarios</span></label></div>
          </div>
          <div>
            <div class="field"><label>Imagen (opcional)</label><img id="anuncioPreview" class="thumb" alt="" style="width:120px;height:120px;border-radius:12px;border:1px solid var(--border);object-fit:cover;"></div>
            <div class="field"><input id="anuncioImg" type="file" accept="image/*"></div>
            <div class="field"><button class="btn secondary sm" type="button" id="btnAnuncioQuitarImg">Quitar imagen</button></div>
          </div>
        </div>
        <div class="auth-actions" style="margin-top:14px;"><button class="btn grow" type="submit">Guardar</button><button class="btn secondary" type="button" data-close-anuncio>Cancelar</button></div>
      </form>
    </div>
  </div>

  <!-- MODAL GU√çA -->
  <div class="modal-backdrop" id="modalGuia">
    <div class="modal glass">
      <header><h3 style="margin:0;">Editar gu√≠a</h3><button class="btn secondary sm" type="button" data-close-guia>‚úï</button></header>
      <form id="guiaForm"><input type="hidden" id="guiaId">
        <div class="grid">
          <div class="field"><label for="guiaTitulo">T√≠tulo</label><input id="guiaTitulo" type="text"></div>
          <div class="field"><label for="guiaFecha">Fecha</label><input id="guiaFecha" type="date"></div>
          <div class="field" style="grid-column:1 / -1"><label for="guiaTexto">Contenido</label><textarea id="guiaTexto"></textarea></div>
          <div class="field" style="grid-column:1 / -1"><label for="guiaURL">Enlace (PDF o externo)</label><input id="guiaURL" type="url" placeholder="https://‚Ä¶"></div>
          <div class="field" style="grid-column:1 / -1"><label class="switch"><input id="guiaGlobal" type="checkbox" checked><span class="slider"></span><span>Visible para todos los usuarios</span></label></div>
        </div>
        <div class="auth-actions" style="margin-top:14px;"><button class="btn grow" type="submit">Guardar</button><button class="btn secondary" type="button" data-close-guia>Cancelar</button></div>
      </form>
    </div>
  </div>

  <!-- MODAL MEDICAMENTO -->
  <div class="modal-backdrop" id="modalMedicamento">
    <div class="modal glass">
      <header><h3 style="margin:0;">Editar medicamento</h3><button class="btn secondary sm" type="button" data-close-med>‚úï</button></header>
      <form id="medicamentoForm"><input type="hidden" id="medId">
        <div class="grid">
          <div class="field"><label for="medNombre">F√°rmaco</label><input id="medNombre" type="text" required></div>
          <div class="field"><label for="medGrupo">Grupo farmacol√≥gico</label><input id="medGrupo" type="text" required></div>
          <div class="field" style="grid-column:1 / -1"><label for="medDilucion">Diluci√≥n sugerida</label><textarea id="medDilucion" rows="2" required></textarea></div>
          <div class="field" style="grid-column:1 / -1"><label for="medComentarios">Comentarios y dosificaci√≥n</label><textarea id="medComentarios" rows="3" required></textarea></div>
        </div>
        <div class="auth-actions" style="margin-top:14px;"><button class="btn grow" type="submit">Guardar</button><button class="btn secondary" type="button" data-close-med>Cancelar</button></div>
      </form>
    </div>
  </div>

  <script src="script.js"></script>
</body></html>